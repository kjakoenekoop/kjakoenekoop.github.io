---
const {notification}: { notification: string } = Astro.props
---

<div id="notification-bar" class="bg-brand py-1 text-center font-medium hidden top-16 inset-x-0 z-40">
    {notification}
    <div class="absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer text-black">X</div>
</div>

<script>
    const handleMount = () => {
        const notificationBar = document.getElementById('notification-bar')
        const isClosed = sessionStorage.getItem('notification-bar:is-closed')
        if (!isClosed) notificationBar.classList.replace('hidden', 'fixed')
        notificationBar.addEventListener('click', () => {
            sessionStorage.setItem('notification-bar:is-closed', 'true')
        })
    }

    document.addEventListener('astro:page-load', handleMount)
</script>